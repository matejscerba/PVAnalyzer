\chapter{Teorie}

\section{Skok o~tyči}

Skok o~tyči je jedna z~technicky náročných atletických disciplín. Atlet se nejprve s~tyčí rozběhne po rozběžisti, následně zasune tyč do kastlíku, poté se odrazí, provede skok a dopadne do doskočiště. Kastlík je místo v~zemi, kam atlet při rozběhu zasune tyč, aby měl při skoku stabilní oporu.

Atlet se při skoku pohybuje vzhůru za pomoci narovnávající se tyče, kterou ohne s~použitím energie získané při rozběhu. Tyče se liší délkou a~tvrdostí, tvrdší tyč je náročnější ohnout, aby atleta vynesla přes laťku, ale akumulovaná energie tyče je vyšší, a~tedy vyústí ve vyšší skok.

Pro pozici těla atleta při rozběhové fázi je typický značně omezený pohyb paží a~mírné natočení trupu. Důvodem tohoto nestandardního způsobu běhu je skutečnost, že atlet nese tyč, a~přesto se snaží vyvinout maximální kontrolovanou rychlost. Rychlosti, které atlet dosahuje v~momentu odrazu, se říká náběhová rychlost. Při skoku o~tyči (a~všech ostatních skokanských disciplínách) má atlet vyznačené místo, ve kterém začíná svůj pokus. Toto místo si volí sám, vliv na jeho polohu má především fyzická zdatnost atleta a~počet kroků rozběhu. Počet kroků závodního rozběhu atletů světové úrovně se pohybuje v~rozmezí 16 až 20~kroků, tedy přibližně 35 až 45~metrů od zadní hrany kastlíku. Atlet se rozbíhá s~tyčí ve vzduchu, postupně ji spouští, dokud není rovnoběžně se zemí. Následně provádí zásun - pohyb, při němž zasune tyč do kastlíku a~dostane paže nad hlavu. V~pozici s~pažemi nad hlavou se atlet odráží a přenáší energii do tyče. Na charakter skoku má vliv také místo odrazu. Následný skok lze rozdělit do několika částí.

První z~nich je odraz, při němž je kladen důraz na efektivitu přenosu energie získané při rozběhu do tyče. Po této krátké fázi skoku následuje zvrat. Jedná se o~pohyb způsobený švihnutím odrazové nohy a~paže, která se tyče drží výše, proti sobě - směrem dopředu. Po provedení zvratu se atlet dostane do pozice vzhůru nohama. V~této pozici atlet provádí obrat, při němž se otáčí o~180~stupňů podél vertikální osy, aby byl čelem k laťce. Následuje odraz od tyče a~přechod laťky, v~této fázi se atlet snaží dostat boky co nejvýš a~zajisit tak plynulý skok přes laťku. Laťku atlet překonává nohama napřed, čelem k~laťce.

\subsection{Analýza technického provedení skoku}

Způsob provedení skoku je podstatným ukazatelem pro výsledný výkon. Jen drobná změna v~jediné fázi pokusu může dramaticky ovlivnit charakter a~výšku celého skoku. Tím pádem mají skokané o~tyči pro nácvik techniky vyhrazeno několik tréninků týdně. Jedná se o~skokanské tréninky a~tréniny zabývající se nácvikem techniky prostřednictvím gymnastických prvků simulujících pohyb atleta na tyči. Pro mou práci jsou důležitější skokanské tréninky.

Skokanské tréninky začínají podobně, jako ostatní atletické tréninky, tedy rozcvičením. Po klasickém rozcvičení následuje příprava na samotné skákání, tato příprava se u jednotlivých atletů může lišit. Mnoho atletů před samotným skákáním provede několik cvičných zásunů a~rozběhů s~tyčí. Následují skoky z~krátkého rozběhu, standardně se jedná o 6 až 8~kroků, někteří atleti provádí tyto skoky bez ohýbání tyče. Již na základě těchto cviků lze určit, na jaké prvky skoku by se měl atlet zaměřit. Po této fázi následuje skákání z~dlouhého rozběhu. Počet kroků se liší podle fáze sezony, ve které se atlet nachází. V~závodním období jsou typické rozběhy delší, v~přípravném období kratší, jelikož tréninky v~přípravném období jsou zpravidla fyzicky náročnější.

Při tréninku se opakuje následující situace. Atlet provede skok a~následně ho konzultuje s~trenérem. Předmětem konzultace je především technické provedení skoku. S~rozvojem moderních technologií jsou konzultace ve většině případů doprovázeny sledováním a~rozborem videozáznamu zahycujícího právě provedený skok. S~pomocí tohoto videozáznamu lze přesně určit místo odrazu a~pohyb atleta při rozběhu a~následném skoku. Na pořízeném videozáznamu lze spolehlivě detekovat technické nedostatky skoků, které by se atlet měl v~následujících pokusech snažit eliminovat.

Videozáznam je nejčastěji pořizován na mobilní telefon, případně tablet. Pozice kamery se nejčastěji nachází na kolmici k~rozběžišti, která prochází místem odrazu. Z~tohoto místa je poměrně dobře vidět jak rozběh, tak skok. Navíc se takto s~velikou přeností dá určit místo odrazu a~pozice atletova těla při přenosu energie do tyče při odrazu. Strana, z~které je skok natočen se často mění, zálaží na prvku skoku, který má trenér s~atletem v~plánu zkoumat.

Závody probíhají podobně, po každém skoku opět dochází ke konzultaci, ovšem na mezinárodních závodech není běžné, že by atlet viděl záznam skoku, který trenér pořídil, na většině soutěží je to zakázané pravidly. Trenér tedy pouze popisuje nedostatky skoku a~probíhá diskuse s~atletem ohledně zaměřující se následujícím postupem. Při závodech není kladen takový důraz na změny v~technice jako při tréninku, typicky probíhá jen rozbor detailů nebo posouvání místa odrazu pro optimální přenos energie do tyče.

\subsection{Analýza biomechanických parametrů skoku}
\label{ssec:parametry}

S~rozvojem moderní techniky přibývá studií zabývajících se pohybem těla atleta při skoku o~tyči. Podkladem pro tyto studie jsou především mezinárodní závody, případně mistrovství republiky. Příkladem je biomechanická zpráva z~finále mužů Mistrovství světa v~atletice 2017 \citep{IAAF2017}, na níž se podíleli pracovníci Leeds Beckett University.

K~analýze parametrů se využívá několik kamer, jejichž záznam slouží jako podklad k~vytvoření modelu atleta v průběhu celého skoku. Tento model je následně analyzován pro zisk konkrétních parametrů skoku. Podobné studie se nejčastěji zabývají následujícími parametry:

\subsubsection{Délka jednotlivých kroků rozběhu}

Na efektivitu přenosu energie do tyče má vliv délka kroků na konci rozběhu. U~většiny atletů je poslední krok rozběhu kratší oproti předešlým krokům. Rozdíl v~délce předposledního a~posledního kroku se může pohybovat v~řádech desítek centimetrů. Důvodem pro zkrácení posledního kroku je sešlápnutí posledního kroku pod tělo atleta, tím atlet ztratí méně horizontální rychlosti při odrazu. Zkrácení posledního kroku doprovází odraz pod menším úhlem, což pro skok o~tyči není tak velký problém jako pro skokany do dálky.

\subsubsection{Doba oporové fáze kroku}

Technika běhu je značně ovlivněna dobou oporové fáze jednotlivých kroků. Doba oporové fáze souvisí s~rychlostí běhu, mírou pokrčení stojné nohy a výškou boků a kolen. Z~prostého videozáznamu se složitě určuje doba oporové fáze kroku, a~tudíž se při této analýze věnuje zvýšená pozornost právě míře pokrčení stojné nohy a výšce boků a kolen.

Doba oporové fáze kroku a~délka kroku se kromě analýzy videozáznamu dá měřit speciálními pásy, které se položí na zem po obou stranách rozběžiště.

\subsubsection{Náběhová rychlost}

Náběhová rychlost má značný vliv na přenos energie rozběhu do tyče, rychlejší atleti tedy zpravidla používají tvrdší a~delší tyče, které umožňují vyšší skoky.

Náběhovou rychlost lze měřit několika způsoby. Pro tréninkové účely se nejčastěji používají rovnoměrně rozmístěné fotobuňky, z~doby běhu mezi nimi lze snadno vypočítat průměrnou rychlost v~daném úseku. Tuto metodu používají především sprinteři, pro skok o~tyči není příliš vhodná, rychlost se v~momentu odrazu dramaticky mění a~tyč může ovlivnit detekci fotobuňek. Následující možností je použití radaru, s~kterým lze zanést aktuální rychlost do grafu. Při snímání atleta ze zadu téměř nedochází k~chybám měření. Způsob měření náběhové rychlosti použitý ve výše zmíněné studii \citep{IAAF2017} spočívá v~analýze detekovaného modelu v~souřadném systému, který umožňuje výpočet rychlosti jednotlivých částí těla ve standardních jednotkách, typicky se uvádí v ms\textsuperscript{-1}.

\subsubsection{Výška boků v~průběhu rozběhu}

V~průběhu rozběhu je zajímavé pozorovat výšku boků, výrazné výkyvy výšky boků mají za následek výkyvy rychlosti. Plynulost rozběhu tedy koreluje s~plynulostí výšky boků v~průběhu rozběhu. Pro rovný skok je důležité, aby se atlet rozeběhl kontrolovaně, což se může projevit ve výšce boků, výkyvy ve výšce boků také souvisí s~proměnlivou délkou kroků a~dobou oporové fáze kroku. Nejdůležitějsí moment pro zkoumání výšky boků jsou poslední kroky rozběhu.

\subsubsection{Místo odrazu}

Vzdálenost místa odrazu od zadní hrany kastlíku je podstatným ukazatelem efektivity přenosu energie do tyče. Je vhodné, aby měl atlet v~místě odrazu horní paži přímo nad sebou. Vhodná vzdálenost místa odrazu je individuální, někteří atleti preferují odraz blíže ke kastlíku než jiní. Pozice odrazu se odvíjí od technického provedení skoku, výšky a~odrazových schopností atleta.

\subsubsection{Výška úchopu}

Hodnota tohoto parametru souvisí s~délkou tyče a~odvíjí se od ní místo odrazu. Může se uvádět jako vzdálenost úchopu horní ruky od spodního konce tyče nebo jako výška úchopu horní ruky nad zemí, když je tyč svislá v~kastlíku. Kastlík je hluboký 20~cm, tedy hodnota po měření první metodou je o 20~cm vyšší než s použitím druhé metody. Hodnota tohoto parametru má vliv na dobu trvání skoku, vyšší úchup znamená delší dobu trvání skoku.

\subsubsection{Úhel odrazu}

Pro správný převod energie rozběhu do tyče je užitečné zkoumat úhel odrazu. Uvádí se jako úhel mezi zemí a~směrem, kterým se po odrazu pohybuje těžiště. Větší úhel znamená vyšší odraz, ale také větší ztrátu rychlosti při odrazu. Optimální hodnota úhlu odrazu různých atletů se liší například v~závoslosti na jejich tělesné výšce.

\subsubsection{Úhly v~kloubech při odrazu}

Pozice těla při odrazu je pro přenos energie do tyče také důležitá. Pokud je atletův trup nakloněn dopředu, jeho ramena a~paže jsou v~lepší pozici pro roztlačení tyče. Naopak pokud je atlet v~záklonu, jeho boky po odrazu snáze ujedou směrem dopředu a~ramena zůstanou vzadu. To má za důsledek horší roztlačení tyče.

\subsubsection{Doba trvání skoku}

Doba trvání skoku je vymezena odrazem od země a~opuštěním tyče. Na hodnotu tohoto parametru má vliv mnoho faktorů. Technika je jedním z~nich, standardně se atleti odráží od tyče vzpaženou paží, jsou ovšem atleti, kteří se tyče pustí dříve. Doba skoku za použití klasického odražení se vzpaženou paží se pohybuje okolo 1,3~s, nestandardní technika může tuto hodnotu stlačit až k 0,7~s. Tyto hodnoty se týkají mužského finále z~Mistrovství světa v~atletice 2017. Dále má na délku skoku vliv tvrdost a~délka tyče, tvrdší tyč se snáze - a~tedy i~rychleji - narovná a~skok tak trvá kratší dobu. S~použitím kratší tyče atletovo tělo překoná kratší vzdálenost a~doba trvání skoku je tedy kratší.

\subsubsection{Převýšení}

S~opuštěním tyče souvisí i~převýšení. Jedná se o~rozdíl zdolané výšky a~výšky úchopu nad zemí. Atleti světové úrovně převýšují okolo 130~cm, ženy okolo 70~cm. Převýšení je jedním z~hlavních parametrů, které určují výkonnost atleta. Na jeho hodnotu má vliv jak fyzická zdatnost, tak technické provedení skoku.




\section{Zpracování obrazu}



\subsection{Detekce člověka}

Postup detekce konkrétního objektu ve snímku se skládá ze dvou kroků. Prvním je zvolení vhodné reprezentace snímku (extrakce jeho vlastností), druhým krokem je spuštění klasifikátoru, který určí, zda (a~kde) se ve snímku hledaný objekt nachází.

Pro účely detekce se využívají okna, která reprezentují část snímku, na které se spustí samotná detekce. Pozice okna udá případnou pozici objektu ve snímku. Příklad tohoto využití je vidět na obrázku \ref{fig:bbox}, detekce postavy se spouští na různě posunutých oknech, které určují posunuté ohraničující rámečky.

Velikost okna se pro detekci různě velkých objektů mění, spíše než okno se mění velikost celého snímku, aby byla reprezentace různých částí snímku stejně velká. Touto modifikací je možné detekovat různě velké objekty v~tomtéž snímku.


\subsubsection{Extrakce vlastností snímku}

Velice úspěšným způsobem extrakce vlastnotí okna pro detekci postav je určení histogramu orientovaných gradientů \citep{HOG}. Tato metoda spočívá v~rozdělení okna na části (buňky), v~nichž se určí histogram, popisující směr gradientů - a~tedy i~směr hran. Jelikož gradient závisí na kontrastu snímku, části snímku je tedy vhodné normalizovat, co se týče kontrastu, aby byly jejich gradienty porovnatelné. Typicky se normalizují skupiny buňek (bloky), ne jednotlivé buňky oken. Získané hodnoty z~takto normalizovných bloků, které pokrývají okno a z~části se překrývají, reprezentují vlastnosti daného okna, které se následně předají klasifikátoru.

Výsledné vlastnosti jsou invariantní k~lokálním geometrickým transformacím, mezi které patří posuny, škálování a~rotace. Tyto transformace mají na výslednou reprezentaci objektu vliv v~případě, že jsou příliš velké. Díky této vlastnosti je detekce člověka úspěšná, pokud se nachází ve~víceméně vzpřímené pozici. O~předpoklad vzpřípené pozice těla se opírá většina detektorů.

Extrakce těchto vlastností dosahuje vysoké úspěšnosti při použití přístupu Scale-Invariant Feature Transform \citep{SIFT}. Tento přístup představuje invarianci vlastností vzhledem ke škálování a~rotaci.


\subsubsection{Klasifikace}

Při využití histogramu orientovaných gradientů se nejčastěji využívá lineární Support vector machines (SVM) \citep{SVM}. SVM se používá k~binární klasifikaci.

Základ metody SVM spočívá v~rozdělení prostoru na dva poloprostory s~využitím nadroviny. Při trénování mám daná data rozdělená do dvou tříd. Lineární SVM předpokládá lineárně separabilní data, tedy je lze oddělit nadrovinou. Nelineární SVM využívá k~dosažení stejného cíle prostorové transformace. Při trénování hledám nadrovinu, která data odděluje a~vzdálenost nadoviny od nejbližšího bodu z~trénovacích dat je maximální možná.

Každý bod v~prostoru odpovídá příslušné kombinaci vlastností vstupu. Podle vlastností vstupu určím pozici v~prostoru a~podle poloprostoru, do kterého spadá, vstup klasifikuji.

V~mém případě určím vlastnosti vstupního snímku, na základě těchto vlastností určím poloprostor, do něhož snímek spadá a~následně se rozhodnu, zda je na obrázku postava či nikoliv.



\subsection{Trasování objektů}

Trasování objektů ve videu je metoda, díky níž lze na základě pozice objektu ve snímku určit jeho pozici v~následujícím snímku. Tímto postupem lze objekt sledovat v~průběhu celého videa. Pro lepší přesnost detekce je vhodné stav objektu postupně aktualizovat, jelikož se v~průběhu videa může menit. Algoritmům, které trasování objektů zajišťují, se říka trackery.

Přístupů k~řešení tohoto problému je několik, lze je rozdělit do následujících kategorií:
\begin{itemize}
    \item feature based,
    \item segmentation based,
    \item estimation based a
    \item learning based.
\end{itemize}

Trasovací metody lze rozdělit také podle jiných kritérií, příkladem je rozdělení pouze do $2$\,\rm kategorií - využívající korelační filtr a~ostatní \citep{}.

\subsubsection{Feature based}

Tento přístup spočívá v~extrakci vlastností objektu. Mezi tyto vlastnosti se řadí například barva nebo textura. Na základě extrahovaných vlastností se v~následujícím snímku najde objekt, který má tyto vlastnosti nejpodobnější a~splňuje další podmínky, mezi které lze zařadit vzdálenost nalezeného objektu od jeho pozice v~předchozím snímku.

\subsubsection{Segmentation based}

Trasování založené na principu segmentace odděluje objekty od pozadí. Typicky je trasován objekt v~popředí videa, tudíž oddělení všech objeků v~popředí od pozadí zjednoduší problém trasování.

\subsubsection{Estimation based}

Metody založené na odhadech se opírají o~reprezentaci objektu stavovým vektorem. Tento vektor popisuje směr pohybu objektu, který se neustále upravuje. Trasování tímto způsobem lze rozdělit do dvou kroků - predikce a~aktualizace.

Predikce využívá stavový vektor k~určení pozice objektu v~následujícím snímku a~aktualizační část predikovanou pozici upraví na základě analýzy této části snímku podobným způsobem, jako při použití feature based trackeru.

\subsubsection{Learning based}

Tento přístup zahrnuje metody využití strojového učení. K~detekci obejktů v~následujícím snímku je potřeba extrahovat ze snímku vlastnosti a~na jejich základě trénovat tracker.

Využití konvolučních sítí dosahuje výborných výsledků, ve výsledcích soutěže The Visual Object Tracking VOT2017 challenge \citep{VOT2017} byly mezi nejpřesnějšími algoritmy využívající porovnávání tvarů za použití konvolučních sítí (CNN matching). Nejpřesnější trackery využívají korelační filtry.



\subsection{Odhad pozice těla}

Odhad pozice těla spočívá v~detekci kloubů těla, k~této detekci se využívá především hluboké učení. Hluboké učení využívá rozsáhlé neuronové sítě, které se skládají z~několika vrstev. První vrstva bývá označovaná jako vstupní, poslední jako výstupní. Vrstvy, které se nachází mezi nimi jsou označovány jako skryté. Každou vrstvu tvoří neurony, které při zpracování vstupu nabývají číselných hodnot. Přechody mezi vrstvami definují váhy, kterými se hodnoty příslušných neuronů násobí. Většina vrstev využívá aktivační funkci, která hodnoty neuronů upravuje než je předá další vrstvě. Aktivační funkce jsou typicky nelineární, mezi nejpoužívanější se řadí ReLU a~tanh, která vznikla modifikací funkce sigmoid, jež se využívala v~minulosti a~slouží k~binární klasifikaci na výstupní vrstvě. Výstupem sítě jsou hodnoty neuronů výstupní vrstvy, které nejčastěji reprezentují pravděpodobnost, že vstup spadá do třídy, kterou daný neuron reprezentuje. Aby se jednalo o~pravděpodobnostní distribuci, musí se hodnoty neuronů normovat. K~tomu slouží funkce softmax, což je rozšíření funkce sigmoid pro klasifikaci do několika tříd. Aktivační funkce popisuje následující tabulka.

\begin{alignat*}{2}
\label{eq:aktivace}
    &\text{ReLU:} \qquad &\text{ReLU}(x) &= max(0,x) \\
    &\text{sigmoid:} \qquad &\sigma(x) &= \frac{1}{1+e^{-x}} \\
    &\text{tanh:} \qquad &\text{tanh}(x) &= 2\sigma(2x) - 1 \\
    &\text{softmax:} \qquad &\text{softmax}(\mathbf{x}) &= \frac{\mathbf{x}}{\sum_i{e^{\mathbf{x}_i}}} \\
\end{alignat*}

Existují různé typy neuronových sítí podle typu vrstev, které obsahují. První sítě, které se využívaly, obsahovaly vrstvy, které byly kompletně propojené. Hodnoty všech neuronů dané vrstvy v~takové síti závisí na hodnotách všech neuronů předchozí vrstvy. Tyto sítě není příliš vhodné používat pro detekci objektů ve snímcích, jelikož závisí na mnoha vlastnostech množiny dat, na kterých jsou natrénovány. Hlavní nevýhoda spočívá v~tom, že tato síť není invariantní k~posunu objektu. Pokud je síť natrénovaná na obrázcích krajiny, kde se slunce nachází v~levém horním rohu, má poté problém detekovat slunce v~pravém horním rohu. Pixely, které reprezentují slunce se totiž nachází na jiném místě ve vstupní vrstvě a~jejich hodnoty využívají jiné váhy.

Řešení tohoto problému nabízí konvoluční sítě. Ty využívají konvoluční filtry, které jsou specifické pro každou vrstvu. Takovýto filtr má danou velikost, ze které bere vstupní hodnoty a~vypočítá hodnotu výslednou. Jedná se o~jakési okno, které se aplikuje na každou část vstupní vrstvy a určí hodnotu konvoluce v~této části. Hodnota neuronu vrstvy tedy závsí jen na blízkém okolí v~předchozí vrstvě. Jelikož se hodnoty filtru při zpracování dané vrstvy nemění, je výsledná hodnota po aplikaci filtru na části obsahující slunce v~levém horním rohu snímku stejná, jako výsledná hodnota po aplikaci na část obsahující slunce v~pravém horním rohu snímku. Více konvolučních vrstev dokáže popsat větší část snímku, jejíž velikost závisí na velikostech použitých filtrů.






































